{% extends "Siderbar/base_sidebar.html" %}
{% load static %}

{% block title %}Gest√£o de Solicita√ß√µes - AgroConecta{% endblock %}

{% block content %}
{% if messages %}
  <script>
      {% for message in messages %}
          alert("{{ message|escapejs }}");
      {% endfor %}
  </script>
{% endif %}

<div class="gestao-container">
    <div class="gestao-header">
        <h1 class="gestao-titulo">Gest√£o de Solicita√ß√µes üìã</h1>
        {# Removido bot√£o de Nova Solicita√ß√£o #}
    </div>

    {% for solicitacao in solicitacoes %}
    <div class="gestao-item">
        <div class="item-header-info">
            <h2 class="item-titulo">
                Solicita√ß√£o #{{ solicitacao.idsolicitacao }} 
                <span class="item-safra">
                    ({{ solicitacao.safra_idsafra.ano }})
                </span>
            </h2>
        </div>
        
        <div class="item-details">
            <p>
                <strong>Cooperativa:</strong>
                {{ solicitacao.cooperativa_cnpj.razaosocial }}
            </p>
            <p>
                <strong>Quantidade (kg):</strong>
                {{ solicitacao.quantidade }} kg
            </p>
            <p>
                <strong>Produtores Beneficiados:</strong>
                {{ solicitacao.numeroprodutoresbeneficiados }}
            </p>
            <p>
                <strong>Status:</strong>
                <span class="status-{{ solicitacao.status_idstatus.idstatus }}">
                    {{ solicitacao.status_idstatus.nome }}
                </span>
            </p>
        </div>

        <div class="item-acoes">
            <a href="{% url 'alterar_status_solicitacao' solicitacao.idsolicitacao %}" 
               class="btn-editar-item">
                <i class="bi bi-toggle-on"></i> Definir Status
            </a>
        </div>
    </div>
    {% empty %}
    <p class="aviso-vazio">Nenhuma solicita√ß√£o encontrada.</p>
    {% endfor %}
</div>

{% endblock content %}
