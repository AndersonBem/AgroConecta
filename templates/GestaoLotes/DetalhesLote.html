{% extends "Siderbar/base_sidebar.html" %}
{% load static %}

{% block title %}Detalhes do Lote - AgroConecta{% endblock %}
{% block body_class %}lote-detalhe-active{% endblock %}

{% block content %}

<div class="cooperativa-detalhe-container lote-detalhe-container">

    <h1>Detalhes do Lote #{{ lote.idlote }}</h1>

    <!-- Bloco: Dados principais do lote -->
    <section class="coop-bloco">
        <h2>Informações do Lote</h2>
        <p><strong>ID:</strong> {{ lote.idlote }}</p>
        <p><strong>Tipo de Semente:</strong> {{ lote.tiposemente_idtiposemente.nome }}</p>
        <p><strong>Peso:</strong> {{ lote.peso }} kg</p>
        <p><strong>Data de Entrada:</strong> {{ lote.dataentrada|date:"d/m/Y" }}</p>
        <p><strong>Data de Vencimento:</strong> {{ lote.datavencimento|date:"d/m/Y" }}</p>
        <p><strong>Data de Saída:</strong>
            {% if lote.datasaida %}
                {{ lote.datasaida|date:"d/m/Y H:i" }}
            {% else %}
                (Ainda em estoque)
            {% endif %}
        </p>
        <p><strong>Status Estoque:</strong> {{ status_estoque }}</p>
        <p><strong>Status Validade:</strong> {{ status_validade }}</p>
        <p><strong>Código do Lote:</strong> {{ lote.lotecol|default:"—" }}</p>
        <p><strong>QR Payload:</strong> {{ lote.qr_payload|default:"—" }}</p>
    </section>

    <!-- Bloco: Armazém -->
    <section class="coop-bloco">
        <h2>Armazém</h2>
        <p><strong>Nome:</strong> {{ lote.armazem_idarmazem.nome }}</p>
        <p><strong>Descrição:</strong> {{ lote.armazem_idarmazem.descricao|default:"(sem descrição)" }}</p>
    </section>

    <!-- Bloco: Endereço do Armazém -->
    <section class="coop-bloco">
        <h2>Endereço do Armazém</h2>
        {% if lote.armazem_idarmazem.endereco_idendereco %}
            <p>
                {{ lote.armazem_idarmazem.endereco_idendereco.rua }},
                {{ lote.armazem_idarmazem.endereco_idendereco.numero }}
            </p>
            <p>
                {{ lote.armazem_idarmazem.endereco_idendereco.bairro }} -
                {{ lote.armazem_idarmazem.endereco_idendereco.cidade }}/
                {{ lote.armazem_idarmazem.endereco_idendereco.uf }}
            </p>
            <p>CEP: {{ lote.armazem_idarmazem.endereco_idendereco.cep }}</p>
        {% else %}
            <p>Endereço não cadastrado.</p>
        {% endif %}
    </section>

    <div class="coop-acoes">
        <a href="{% url 'editar_lote' lote.idlote %}" class="btn btn-editar">
            Editar Lote
        </a>

        <a href="{% url 'deletar_lote' lote.idlote %}" class="btn btn-deletar">
            Deletar Lote
        </a>

        <a href="{% url 'gestao_lotes' %}" class="btn btn-voltar">
            Voltar para a Lista
        </a>
    </div>

</div>

{% endblock %}
