{% extends "Siderbar/base_sidebar.html" %}
{% load static %}

{% block title %}Detalhes do Armazém - AgroConecta{% endblock %}

{% block content %}

{% if messages %}
  <script>
      {% for message in messages %}
          alert("{{ message|escapejs }}");
      {% endfor %}
  </script>
{% endif %}

<div class="cooperativa-detalhe-container armazem-detalhe-container">
    
    <h1>Detalhes do Armazém: {{ armazem.nome }}</h1>

    <div class="coop-bloco">
        <h2>Dados do Armazém</h2>
        <p><strong>Nome:</strong> {{ armazem.nome }}</p>
        <p><strong>Gestor Responsável:</strong> {{ armazem.gestor_cpf.nome }}</p>
        <p><strong>Descrição:</strong> {{ armazem.descricao|default:"(sem descrição)" }}</p>
    </div>
    
    <div class="coop-bloco">
        <h2>Endereço</h2>
        <p><strong>Rua:</strong> {{ armazem.endereco_idendereco.rua }}</p>
        <p><strong>Bairro:</strong> {{ armazem.endereco_idendereco.bairro }}</p>
        <p><strong>CEP:</strong> {{ armazem.endereco_idendereco.cep }}</p>
        <p><strong>Cidade/UF:</strong> 
            {{ armazem.endereco_idendereco.cidade }} / {{ armazem.endereco_idendereco.uf }}
        </p>
    </div>

    <div class="coop-bloco lotes-sementes-bloco">
        <h2>Lotes e Sementes Armazenados</h2>
        
        <div class="lotes-sementes-grid">
            <div class="lotes-col">
                <h3>Lotes Armazenados ({{ lotes|length }})</h3>
                <ul>
                {% for lote in lotes %}
                    <li>
                        Lote #{{ lote.idlote }} —
                        {{ lote.peso }} kg —
                        Entrada: {{ lote.dataentrada|date:"d/m/Y" }}
                    </li>
                {% empty %}
                    <li>Nenhum lote armazenado.</li>
                {% endfor %}
                </ul>
            </div>
            
            <div class="sementes-col">
                <h3>Tipos de Sementes ({{ tipos_sementes|length }})</h3>
                <ul>
                {% for semente in tipos_sementes %}
                    <li>{{ semente.nome }}</li>
                {% empty %}
                    <li>Nenhum tipo de semente.</li>
                {% endfor %}
                </ul>
            </div>
        </div>
        
        <div class="lote-action">
             <a href="#" class="btn-adicionar-lote">
                <i class="bi bi-plus-circle"></i> Adicionar Lote
            </a>
        </div>
    </div>
    
    <div class="coop-acoes">
        <a href="{% url 'editar_armazem' armazem.idarmazem %}" class="btn btn-editar">Editar Armazém</a>
        <a href="{% url 'deletar_armazem' armazem.idarmazem %}" class="btn btn-deletar">
            Deletar
        </a>
        <a href="{% url 'gestao_armazens' %}" class="btn btn-voltar">Voltar para a Lista</a>
    </div>

</div>

{% endblock content %}
