{% extends "Siderbar/base_sidebar.html" %}
{% load static %}

{% block title %}Dashboard - AgroConecta{% endblock %}
{% block content %}

<div class="dashboard-container">
    <header class="dashboard-header">
        <h1>Dashboard Anal√≠tico üìä</h1>
        <p>Vis√£o geral de sementes, lotes e armazenamento.</p>
    </header>

    <div class="charts-grid">
        
        <div class="chart-card">
            <h2>Sementes por Armaz√©m (kg)</h2>
            <canvas id="sementeArmazemChart"></canvas>
        </div>
        
        <div class="chart-card">
            <h2>Status das Solicita√ß√µes</h2>
            <canvas id="solicitacoesChart"></canvas>
        </div>
        
        <div class="chart-card chart-full-width">
            <h2>Registro de Lotes (√öltimos 6 Meses)</h2>
            <canvas id="lotesTempoChart"></canvas>
        </div>

    </div>
</div>

{# --- AQUI: div oculto com os dados em JSON --- #}
<div id="dashboard-data"
     data-armazem-labels='{{ armazem_labels_json|default:"[]"|safe }}'
     data-armazem-dados='{{ armazem_dados_json|default:"[]"|safe }}'
     data-status-labels='{{ status_labels_json|default:"[]"|safe }}'
     data-status-dados='{{ status_dados_json|default:"[]"|safe }}'
     data-lotes-labels='{{ lotes_labels_json|default:"[]"|safe }}'
     data-lotes-dados='{{ lotes_dados_json|default:"[]"|safe }}'>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="{% static 'js/dashboard_charts.js' %}"></script>

{% endblock content %}
