{% extends "Siderbar/base_sidebar.html" %}
{% load static %} 

{% block title %}Perfil do Gestor - AgroConecta{% endblock %}

{% block body_class %}
class="perfil-gestor-active" 
{% endblock body_class %}

{% block content %}

{% if messages %}
  <script>
      {% for message in messages %}
          alert("{{ message|escapejs }}");
      {% endfor %}
  </script>
{% endif %}

<div class="gestor-profile-container">
    
    <h1 class="profile-title">Perfil: {{ gestor.nome }}</h1>

    <!-- CARD: Dados do Gestor -->
    <div class="profile-card personal-details">
        <h2 class="card-title">Dados do Gestor</h2>
        
        <div class="data-group">
            <p><strong>Nome:</strong> {{ gestor.nome }}</p>
            <p><strong>CPF:</strong> {{ gestor.cpf }}</p>
            <p><strong>E-mail:</strong> {{ gestor.email }}</p>
            <p><strong>Telefone:</strong> {{ telefone_principal|default:"Não informado" }}</p>
        </div>
    </div>
    
    <!-- CARD: Armazéns -->
    <div class="profile-card armazem-list-card">
        <h2 class="card-title">Armazéns sob Gestão</h2>
        
        <div class="data-table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome do Armazém</th>
                        <th>Capacidade (kg)</th>
                        <th>Status</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
    {% for arm in armazens %}
        <tr>
            <td data-label="ID">{{ arm.idarmazem }}</td>
            <td data-label="Nome do Armazém">{{ arm.nome }}</td>
            <td data-label="Capacidade (kg)">-</td>
            <td data-label="Status">Ativo</td>
            <td data-label="Ações">
                <a href="{% url 'ver_armazens' arm.idarmazem %}" class="table-action-btn">Ver</a>
            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="5">Nenhum armazém associado a este gestor.</td>
        </tr>
    {% endfor %}
</tbody>
            </table>
        </div>
    </div>

    <!-- Botões -->
        <div class="action-buttons">
            <a href="{% url 'editar_perfil_gestor' %}" class="btn-action btn-edit">Editar Perfil</a>
        </div>
    

</div>

{% endblock content %}
